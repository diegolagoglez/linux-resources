#!/bin/bash

VERSION="0.1"

function error() {
	echo "ERROR: $1" &1>2
	if [ -n "$2" -a $2 != 0 ]; then
		exit $2
	fi
}

function credits() {
	echo "$(basename $0) v$VERSION - Utility for basic Ubuntu systems administration."
	echo "Diego Lago Gonz√°lez <diego.lago.gonzalez@gmail.com> - http://github.com/diegolagoglez"
}

function usage() {
	echo "Usage: $(basename $0) [command] [options]"
	echo "Commands:"
	echo "  snapshot : Makes an btrfs snapshot of the btrfs Ubuntu layout."
	echo "      help : Show this help and exits."
}

function make_snapshot() {
	:
}

function main() {
	if [ $# -eq 0 ]; then
		usage
		exit 1
	fi

	local command="$1"
	shift
	case "$command" in
		"snapshot")
			make_snapshot $@
		;;
		"help")
			credits
			usage
		;;
		*)
			error "Invalid command: $command" 2
		;;
	esac
}

main $@
